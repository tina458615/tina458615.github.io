<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>é¢±é¢¨æ°£å€™é æ¸¬æ¨¡æ“¬å™¨</title>
</head>
<body style="background:#f5f9fc; color:#1a3a5c; font-family:sans-serif; padding:0; margin:0; min-height:100vh;">

<div style="max-width:500px; margin:0 auto; padding:20px;">

<h1 style="color:#0077aa; font-size:20px; text-align:center; margin-bottom:5px;">ğŸŒ€ é¢±é¢¨æ°£å€™è®Šé·é æ¸¬</h1>
<p style="text-align:center; color:#6688aa; font-size:13px; margin-bottom:20px;">è·Ÿè‘—ç§‘å­¸å®¶çš„è…³æ­¥ï¼Œæ¨¡æ“¬æœªä¾†é¢±é¢¨è®ŠåŒ–</p>

<!-- é€²åº¦æŒ‡ç¤º -->
<div style="display:flex; justify-content:space-between; margin-bottom:25px; padding:0 5px;">
<div id="dot1" style="width:20px; height:20px; border-radius:50%; background:#0099cc; color:white; display:flex; align-items:center; justify-content:center; font-size:11px; font-weight:bold;">1</div>
<div style="flex:1; height:2px; background:#d0e4f0; margin:9px 4px;"></div>
<div id="dot2" style="width:20px; height:20px; border-radius:50%; background:#d0e4f0; color:#999; display:flex; align-items:center; justify-content:center; font-size:11px;">2</div>
<div style="flex:1; height:2px; background:#d0e4f0; margin:9px 4px;"></div>
<div id="dot3" style="width:20px; height:20px; border-radius:50%; background:#d0e4f0; color:#999; display:flex; align-items:center; justify-content:center; font-size:11px;">3</div>
<div style="flex:1; height:2px; background:#d0e4f0; margin:9px 4px;"></div>
<div id="dot4" style="width:20px; height:20px; border-radius:50%; background:#d0e4f0; color:#999; display:flex; align-items:center; justify-content:center; font-size:11px;">4</div>
<div style="flex:1; height:2px; background:#d0e4f0; margin:9px 4px;"></div>
<div id="dot5" style="width:20px; height:20px; border-radius:50%; background:#d0e4f0; color:#999; display:flex; align-items:center; justify-content:center; font-size:11px;">5</div>
<div style="flex:1; height:2px; background:#d0e4f0; margin:9px 4px;"></div>
<div id="dot6" style="width:20px; height:20px; border-radius:50%; background:#d0e4f0; color:#999; display:flex; align-items:center; justify-content:center; font-size:11px;">6</div>
</div>

<div id="content"></div>

</div>

<script>
var step = 1;
var data = {};

var results = {
    mid: {
        sst: '+1.5â„ƒ',
        humidity: '+15%',
        tcCount: '+10%',
        strongTC: '+105%',
        maxWind: '+5%',
        rain200km: '+20%',
        landRain: '+20%',
        surfaceWind: '+8%'
    },
    end: {
        sst: '+3â„ƒ',
        humidity: '+25%',
        tcCount: '-50%',
        strongTC: '+60%',
        strongIntensity: '+6.5%',
        maxWind: '+9%',
        rain200km: '+35%',
        landRain: '+40%',
        surfaceWind: '+10%'
    }
};

function render() {
    var h = '';
    
    // ===== æ­¥é©Ÿ 1ï¼šå»ºç«‹è™›æ“¬åœ°çƒ =====
    if (step == 1) {
        h += '<div style="text-align:center; padding:15px 0;">';
        h += '<div style="font-size:70px; margin-bottom:10px;">ğŸŒ</div>';
        h += '<h2 style="font-size:18px; color:#0077aa; margin-bottom:8px;">æ­¥é©Ÿ 1ï¼šå»ºç«‹è™›æ“¬åœ°çƒ</h2>';
        h += '<p style="color:#5577aa; font-size:14px; line-height:1.6; margin-bottom:15px;">ç§‘å­¸å®¶ç”¨è¶…ç´šé›»è…¦å»ºç«‹ã€Œè™›æ“¬åœ°çƒã€ï¼Œæ¨¡æ“¬å¤§æ°£ã€æµ·æ´‹çš„äº¤äº’ä½œç”¨ã€‚</p>';
        h += '</div>';
        
        h += '<div style="background:white; border-radius:12px; padding:15px; margin-bottom:15px; box-shadow:0 2px 8px rgba(0,100,150,0.1);">';
        h += '<p style="font-size:13px; color:#6688aa; margin-bottom:12px;">é¸æ“‡æ°£å€™æ¨¡å¼çš„è§£æåº¦ï¼š</p>';
        h += '<button onclick="choose(1,\'20km\')" style="display:block; width:100%; padding:14px; margin-bottom:10px; background:#e8f4fa; border:2px solid #0099cc; color:#0077aa; border-radius:10px; font-size:14px; text-align:left;">ğŸ”¬ <strong>é«˜è§£æåº¦ï¼ˆ20-25å…¬é‡Œï¼‰</strong><br><span style="font-size:12px; color:#6688aa;">å¯ç›´æ¥æ¨¡æ“¬é¢±é¢¨ç”Ÿæˆèˆ‡è·¯å¾‘</span></button>';
        h += '</div>';
        
        h += '<div style="background:#e0f0f8; border-radius:8px; padding:12px;">';
        h += '<p style="font-size:12px; color:#4477aa; margin:0;">ğŸ’¡ TCCIP ä½¿ç”¨ HiRAM èˆ‡ MRI-AGCM é«˜è§£æåº¦æ¨¡å¼</p>';
        h += '</div>';
    }
    
    // ===== æ­¥é©Ÿ 2ï¼šè¨­å®šæ’æ”¾æƒ…å¢ƒ =====
    else if (step == 2) {
        h += '<div style="text-align:center; padding:15px 0;">';
        h += '<div style="font-size:70px; margin-bottom:10px;">ğŸ­</div>';
        h += '<h2 style="font-size:18px; color:#0077aa; margin-bottom:8px;">æ­¥é©Ÿ 2ï¼šè¨­å®šæ’æ”¾æƒ…å¢ƒ</h2>';
        h += '<p style="color:#5577aa; font-size:14px; line-height:1.6; margin-bottom:15px;">æœªä¾†äººé¡æœƒæ’æ”¾å¤šå°‘æº«å®¤æ°£é«”ï¼Ÿé€™æ±ºå®šäº†åœ°çƒæš–åŒ–çš„ç¨‹åº¦ã€‚</p>';
        h += '</div>';
        
        h += '<div style="background:white; border-radius:12px; padding:15px; margin-bottom:15px; box-shadow:0 2px 8px rgba(0,100,150,0.1);">';
        h += '<p style="font-size:13px; color:#6688aa; margin-bottom:12px;">é¸æ“‡æº«å®¤æ°£é«”æ’æ”¾æƒ…å¢ƒï¼š</p>';
        h += '<button onclick="choose(2,\'RCP8.5\')" style="display:block; width:100%; padding:14px; margin-bottom:10px; background:#fff5f0; border:2px solid #ee7744; color:#cc5522; border-radius:10px; font-size:14px; text-align:left;">ğŸ”¥ <strong>RCP8.5 é«˜æ’æ”¾æƒ…å¢ƒ</strong><br><span style="font-size:12px; color:#aa7766;">æŒçºŒå¤§é‡æ’æ”¾ï¼Œä¸–ç´€æœ«å‡æº«ç´„3-4Â°C</span></button>';
        h += '</div>';
        
        h += '<div style="background:#fff8f0; border-radius:8px; padding:12px;">';
        h += '<p style="font-size:12px; color:#aa7755; margin:0;">ğŸ“Š RCP = ä»£è¡¨æ¿ƒåº¦é€”å¾‘ï¼Œæè¿°ä¸åŒçš„æœªä¾†æ’æ”¾å‡è¨­</p>';
        h += '</div>';
    }
    
    // ===== æ­¥é©Ÿ 3ï¼šæŒ‘é¸è§€å¯Ÿæ™‚é–“ =====
    else if (step == 3) {
        h += '<div style="text-align:center; padding:15px 0;">';
        h += '<div style="font-size:70px; margin-bottom:10px;">ğŸ“…</div>';
        h += '<h2 style="font-size:18px; color:#0077aa; margin-bottom:8px;">æ­¥é©Ÿ 3ï¼šæŒ‘é¸è§€å¯Ÿæ™‚é–“</h2>';
        h += '<p style="color:#5577aa; font-size:14px; line-height:1.6; margin-bottom:15px;">é¸æ“‡æƒ³è¦é æ¸¬çš„æœªä¾†æ™‚é–“ç¯„åœã€‚</p>';
        h += '</div>';
        
        h += '<div style="background:white; border-radius:12px; padding:15px; margin-bottom:15px; box-shadow:0 2px 8px rgba(0,100,150,0.1);">';
        h += '<p style="font-size:13px; color:#6688aa; margin-bottom:12px;">é¸æ“‡é æ¸¬æ™‚æœŸï¼š</p>';
        h += '<button onclick="choose(3,\'mid\')" style="display:block; width:100%; padding:14px; margin-bottom:10px; background:#f0f8ff; border:2px solid #0099cc; color:#0077aa; border-radius:10px; font-size:14px; text-align:left;">ğŸ“† <strong>ä¸–ç´€ä¸­ï¼ˆ2040-2065å¹´ï¼‰</strong><br><span style="font-size:12px; color:#6688aa;">ç´„20-40å¹´å¾Œçš„æ°£å€™</span></button>';
        h += '<button onclick="choose(3,\'end\')" style="display:block; width:100%; padding:14px; margin-bottom:10px; background:#f0f8ff; border:2px solid #0099cc; color:#0077aa; border-radius:10px; font-size:14px; text-align:left;">ğŸ”® <strong>ä¸–ç´€æœ«ï¼ˆ2075-2099å¹´ï¼‰</strong><br><span style="font-size:12px; color:#6688aa;">ç´„50-75å¹´å¾Œçš„æ°£å€™</span></button>';
        h += '</div>';
        
        h += '<div style="background:#e8f4fa; border-radius:8px; padding:12px;">';
        h += '<p style="font-size:12px; color:#4477aa; margin:0;">â±ï¸ èˆ‡åŸºæœŸï¼ˆ1979-2003å¹´ï¼‰æ¯”è¼ƒè®ŠåŒ–</p>';
        h += '</div>';
    }
    
    // ===== æ­¥é©Ÿ 4ï¼šå‹•åŠ›é™å°ºåº¦æ‰¾å‡ºè‡ºç£ =====
    else if (step == 4) {
        h += '<div style="text-align:center; padding:15px 0;">';
        h += '<div style="font-size:70px; margin-bottom:10px;">ğŸ”¬</div>';
        h += '<h2 style="font-size:18px; color:#0077aa; margin-bottom:8px;">æ­¥é©Ÿ 4ï¼šå‹•åŠ›é™å°ºåº¦</h2>';
        h += '<p style="color:#5577aa; font-size:14px; line-height:1.6; margin-bottom:15px;">å…¨çƒæ¨¡å¼çš„ç¶²æ ¼å¤ªå¤§ï¼Œéœ€è¦ã€Œå°ç„¦ã€åˆ°è‡ºç£æ‰èƒ½çœ‹æ¸…ç´°ç¯€ã€‚</p>';
        h += '</div>';
        
        h += '<div style="background:white; border-radius:12px; padding:15px; margin-bottom:15px; box-shadow:0 2px 8px rgba(0,100,150,0.1);">';
        
        // åœ–è§£
        h += '<div style="display:flex; align-items:center; justify-content:center; gap:8px; margin-bottom:15px; padding:15px; background:#f5fafd; border-radius:10px;">';
        h += '<div style="text-align:center;"><div style="font-size:35px;">ğŸŒ</div><div style="font-size:10px; color:#888;">å…¨çƒ 25km</div></div>';
        h += '<div style="font-size:20px; color:#0099cc;">â†’</div>';
        h += '<div style="text-align:center;"><div style="font-size:35px;">ğŸ—ºï¸</div><div style="font-size:10px; color:#888;">å€åŸŸ 5km</div></div>';
        h += '<div style="font-size:20px; color:#0099cc;">â†’</div>';
        h += '<div style="text-align:center;"><div style="font-size:35px;">ğŸ‡¹ğŸ‡¼</div><div style="font-size:10px; color:#888;">è‡ºç£ 2.5km</div></div>';
        h += '</div>';
        
        h += '<p style="font-size:13px; color:#5577aa; margin-bottom:12px; line-height:1.6;">ä½¿ç”¨ WRF å€åŸŸæ¨¡å¼ï¼Œå°‡è§£æåº¦å¾ 25 å…¬é‡Œæé«˜åˆ° 5 å…¬é‡Œç”šè‡³ 2.5 å…¬é‡Œï¼Œæ‰èƒ½å‘ˆç¾è‡ºç£è¤‡é›œåœ°å½¢å°é¢±é¢¨é™é›¨çš„å½±éŸ¿ã€‚</p>';
        
        h += '<button onclick="choose(4,\'5km\')" style="display:block; width:100%; padding:14px; margin-bottom:10px; background:#e8f4fa; border:2px solid #0099cc; color:#0077aa; border-radius:10px; font-size:14px; text-align:left;">ğŸ¯ <strong>åŸ·è¡Œå‹•åŠ›é™å°ºåº¦</strong><br><span style="font-size:12px; color:#6688aa;">WRF æ¨¡å¼ â†’ 5å…¬é‡Œè§£æåº¦</span></button>';
        h += '</div>';
        
        h += '<div style="background:#e0f0f8; border-radius:8px; padding:12px;">';
        h += '<p style="font-size:12px; color:#4477aa; margin:0;">ğŸ”ï¸ é«˜è§£æåº¦æ‰èƒ½æ¨¡æ“¬å±±è„ˆåœ°å½¢å°è‡´çš„æ¥µç«¯é™é›¨</p>';
        h += '</div>';
    }
    
    // ===== æ­¥é©Ÿ 5ï¼šçµ±è¨ˆé¢±é¢¨ =====
    else if (step == 5) {
        h += '<div style="text-align:center; padding:15px 0;">';
        h += '<div style="font-size:70px; margin-bottom:10px;">ğŸŒ€</div>';
        h += '<h2 style="font-size:18px; color:#0077aa; margin-bottom:8px;">æ­¥é©Ÿ 5ï¼šçµ±è¨ˆä¾µå°é¢±é¢¨</h2>';
        h += '<p style="color:#5577aa; font-size:14px; line-height:1.6; margin-bottom:15px;">è¿½è¹¤æ¨¡æ“¬å‡ºçš„æ¯å€‹é¢±é¢¨ï¼Œçµ±è¨ˆæœƒå½±éŸ¿è‡ºç£çš„é¢±é¢¨è®ŠåŒ–ã€‚</p>';
        h += '</div>';
        
        h += '<div style="background:white; border-radius:12px; padding:15px; margin-bottom:15px; box-shadow:0 2px 8px rgba(0,100,150,0.1);">';
        
        h += '<div style="background:#f5fafd; border-radius:10px; padding:12px; margin-bottom:15px;">';
        h += '<p style="font-size:13px; color:#0077aa; margin:0 0 8px; font-weight:bold;">ğŸ“Š åˆ†æé …ç›®ï¼š</p>';
        h += '<p style="font-size:13px; color:#5577aa; margin:3px 0;">â€¢ ä¾µå°é¢±é¢¨çš„æ•¸é‡è®ŠåŒ–</p>';
        h += '<p style="font-size:13px; color:#5577aa; margin:3px 0;">â€¢ é¢±é¢¨å¼·åº¦èˆ‡é¢¨é€Ÿè®ŠåŒ–</p>';
        h += '<p style="font-size:13px; color:#5577aa; margin:3px 0;">â€¢ é¢±é¢¨å¸¶ä¾†çš„é™é›¨è®ŠåŒ–</p>';
        h += '</div>';
        
        h += '<button onclick="runAnalysis()" style="display:block; width:100%; padding:14px; background:linear-gradient(135deg,#0099cc,#0077aa); border:none; color:white; border-radius:10px; font-size:15px; font-weight:bold;">â–¶ï¸ é–‹å§‹çµ±è¨ˆåˆ†æ</button>';
        h += '</div>';
    }
    
    // ===== æ­¥é©Ÿ 5.5ï¼šåˆ†æå‹•ç•« =====
    else if (step == 5.5) {
        h += '<div style="text-align:center; padding:50px 20px;">';
        h += '<div style="font-size:60px; margin-bottom:15px;">ğŸŒ€</div>';
        h += '<h2 style="font-size:16px; color:#0077aa; margin-bottom:8px;">æ­£åœ¨çµ±è¨ˆé¢±é¢¨è³‡æ–™...</h2>';
        h += '<p style="color:#6688aa; font-size:13px;" id="analysisText">è¿½è¹¤è¥¿åŒ—å¤ªå¹³æ´‹é¢±é¢¨è·¯å¾‘</p>';
        h += '<div style="background:#e0e8f0; border-radius:10px; height:8px; margin-top:20px; overflow:hidden;">';
        h += '<div id="analysisBar" style="background:linear-gradient(90deg,#0099cc,#00bbaa); height:100%; width:0%; transition:width 0.3s;"></div>';
        h += '</div>';
        h += '</div>';
        
        setTimeout(function() {
            if(document.getElementById('analysisBar')) document.getElementById('analysisBar').style.width = '25%';
            if(document.getElementById('analysisText')) document.getElementById('analysisText').innerText = 'çµ±è¨ˆä¾µå°é¢±é¢¨æ•¸é‡...';
        }, 600);
        setTimeout(function() {
            if(document.getElementById('analysisBar')) document.getElementById('analysisBar').style.width = '50%';
            if(document.getElementById('analysisText')) document.getElementById('analysisText').innerText = 'è¨ˆç®—é¢±é¢¨å¼·åº¦è®ŠåŒ–...';
        }, 1200);
        setTimeout(function() {
            if(document.getElementById('analysisBar')) document.getElementById('analysisBar').style.width = '75%';
            if(document.getElementById('analysisText')) document.getElementById('analysisText').innerText = 'åˆ†æé¢¨é€Ÿèˆ‡é™é›¨è®ŠåŒ–...';
        }, 1800);
        setTimeout(function() {
            if(document.getElementById('analysisBar')) document.getElementById('analysisBar').style.width = '100%';
            if(document.getElementById('analysisText')) document.getElementById('analysisText').innerText = 'ç”¢ç”Ÿç§‘å­¸å ±å‘Š...';
        }, 2400);
        setTimeout(function() {
            step = 6;
            render();
        }, 3000);
    }
    
    // ===== æ­¥é©Ÿ 6ï¼šç§‘å­¸å ±å‘Š =====
    else if (step == 6) {
        var r = results[data.period];
        var periodName = data.period == 'end' ? 'ä¸–ç´€æœ«' : 'ä¸–ç´€ä¸­';
        var periodYear = data.period == 'end' ? '2075-2099' : '2040-2065';
        
        h += '<div style="background:linear-gradient(135deg,#0099cc,#0077aa); border-radius:15px; padding:20px; margin-bottom:15px; color:white; text-align:center;">';
        h += '<div style="font-size:45px; margin-bottom:8px;">ğŸ“Š</div>';
        h += '<h2 style="font-size:18px; margin:0 0 5px;">è‡ºç£é¢±é¢¨æ°£å€™è®Šé·</h2>';
        h += '<h2 style="font-size:16px; font-weight:normal; margin:0 0 8px;">é æ¸¬å ±å‘Š</h2>';
        h += '<p style="font-size:12px; opacity:0.9;">RCP8.5 æƒ…å¢ƒ ï½œ ' + periodName + 'ï¼ˆ' + periodYear + 'ï¼‰</p>';
        h += '</div>';
        
        // ç’°å¢ƒè®ŠåŒ–
        h += '<div style="background:white; border-radius:12px; padding:15px; margin-bottom:12px; box-shadow:0 2px 8px rgba(0,100,150,0.1);">';
        h += '<h3 style="font-size:14px; color:#0077aa; margin:0 0 12px;">ğŸŒ¡ï¸ ç’°å¢ƒè®ŠåŒ–</h3>';
        h += '<div style="display:flex; gap:10px;">';
        h += '<div style="flex:1; background:#fff5f0; border-radius:10px; padding:12px; text-align:center;">';
        h += '<div style="font-size:24px; font-weight:bold; color:#dd5533;">' + r.sst + '</div>';
        h += '<div style="font-size:11px; color:#aa7766;">æµ·è¡¨é¢æ°£æº«</div>';
        h += '</div>';
        h += '<div style="flex:1; background:#f0f8ff; border-radius:10px; padding:12px; text-align:center;">';
        h += '<div style="font-size:24px; font-weight:bold; color:#0088bb;">' + r.humidity + '</div>';
        h += '<div style="font-size:11px; color:#5588aa;">å¤§æ°£æ°´æ°£é‡</div>';
        h += '</div>';
        h += '</div>';
        h += '</div>';
        
        // é¢±é¢¨æ•¸é‡
        h += '<div style="background:white; border-radius:12px; padding:15px; margin-bottom:12px; box-shadow:0 2px 8px rgba(0,100,150,0.1);">';
        h += '<h3 style="font-size:14px; color:#0077aa; margin:0 0 12px;">ğŸŒ€ é¢±é¢¨æ•¸é‡è®ŠåŒ–</h3>';
        h += '<div style="display:flex; gap:10px;">';
        h += '<div style="flex:1; background:#f0f8ff; border-radius:10px; padding:12px; text-align:center;">';
        var tcColor = r.tcCount.includes('-') ? '#0088bb' : '#dd5533';
        var tcBg = r.tcCount.includes('-') ? '#f0f8ff' : '#fff5f0';
        h += '<div style="font-size:24px; font-weight:bold; color:' + tcColor + ';">' + r.tcCount + '</div>';
        h += '<div style="font-size:11px; color:#6688aa;">é¢±é¢¨ç¸½æ•¸</div>';
        h += '</div>';
        h += '<div style="flex:1; background:#fff5f0; border-radius:10px; padding:12px; text-align:center;">';
        h += '<div style="font-size:24px; font-weight:bold; color:#dd5533;">' + r.strongTC + '</div>';
        h += '<div style="font-size:11px; color:#aa7766;">å¼·é¢±é »ç‡</div>';
        h += '</div>';
        h += '</div>';
        h += '</div>';
        
        // é¢¨é€Ÿè®ŠåŒ–
        h += '<div style="background:white; border-radius:12px; padding:15px; margin-bottom:12px; box-shadow:0 2px 8px rgba(0,100,150,0.1);">';
        h += '<h3 style="font-size:14px; color:#0077aa; margin:0 0 12px;">ğŸ’¨ é¢¨é€Ÿè®ŠåŒ–</h3>';
        h += '<div style="display:flex; gap:10px;">';
        h += '<div style="flex:1; background:#fff5f0; border-radius:10px; padding:12px; text-align:center;">';
        h += '<div style="font-size:24px; font-weight:bold; color:#dd5533;">' + r.maxWind + '</div>';
        h += '<div style="font-size:11px; color:#aa7766;">è¿‘ä¸­å¿ƒæœ€å¤§é¢¨é€Ÿ</div>';
        h += '</div>';
        h += '<div style="flex:1; background:#fff5f0; border-radius:10px; padding:12px; text-align:center;">';
        h += '<div style="font-size:24px; font-weight:bold; color:#dd5533;">' + r.surfaceWind + '</div>';
        h += '<div style="font-size:11px; color:#aa7766;">åœ°é¢å¹³å‡é¢¨é€Ÿ</div>';
        h += '</div>';
        h += '</div>';
        h += '</div>';
        
        // é™é›¨è®ŠåŒ–
        h += '<div style="background:white; border-radius:12px; padding:15px; margin-bottom:12px; box-shadow:0 2px 8px rgba(0,100,150,0.1);">';
        h += '<h3 style="font-size:14px; color:#0077aa; margin:0 0 12px;">ğŸŒ§ï¸ é™é›¨è®ŠåŒ–</h3>';
        h += '<div style="display:flex; gap:10px;">';
        h += '<div style="flex:1; background:#fff5f0; border-radius:10px; padding:12px; text-align:center;">';
        h += '<div style="font-size:24px; font-weight:bold; color:#dd5533;">' + r.rain200km + '</div>';
        h += '<div style="font-size:11px; color:#aa7766;">ä¸­å¿ƒ200km<br>å€åŸŸé™é›¨</div>';
        h += '</div>';
        h += '<div style="flex:1; background:#fff5f0; border-radius:10px; padding:12px; text-align:center;">';
        h += '<div style="font-size:24px; font-weight:bold; color:#dd5533;">' + r.landRain + '</div>';
        h += '<div style="font-size:11px; color:#aa7766;">é™¸åœ°<br>æ™‚é›¨é‡</div>';
        h += '</div>';
        h += '</div>';
        h += '</div>';
        
        // ç§‘å­¸çµè«–
        h += '<div style="background:#fff8f0; border:2px solid #ffaa66; border-radius:12px; padding:15px; margin-bottom:15px;">';
        h += '<h3 style="font-size:14px; color:#dd7733; margin:0 0 10px;">âš ï¸ ç§‘å­¸çµè«–</h3>';
        if (data.period == 'end') {
            h += '<p style="font-size:13px; color:#775544; line-height:1.7; margin:0;">åœ¨ RCP8.5 æƒ…å¢ƒä¸‹ï¼Œ<strong style="color:#0077aa;">ä¸–ç´€æœ«é¢±é¢¨ç¸½æ•¸å°‡æ¸›å°‘ 50%</strong>ï¼Œä½†<strong style="color:#dd5533;">å¼·é¢±é »ç‡å¢åŠ  60%</strong>ã€‚é¢±é¢¨å¸¶ä¾†çš„<strong style="color:#dd5533;">é™é›¨å¼·åº¦å¢åŠ  35-40%</strong>ï¼Œä»£è¡¨æœªä¾†é¢±é¢¨é›–ç„¶è®Šå°‘ï¼Œä½†æ¯æ¬¡ä¾µå°å°‡å¸¶ä¾†æ›´æ¥µç«¯çš„é¢¨é›¨ã€‚</p>';
        } else {
            h += '<p style="font-size:13px; color:#775544; line-height:1.7; margin:0;">åœ¨ RCP8.5 æƒ…å¢ƒä¸‹ï¼Œ<strong style="color:#dd5533;">ä¸–ç´€ä¸­é¢±é¢¨ç¸½æ•¸ç•¥å¢ 10%</strong>ï¼Œä¸”<strong style="color:#dd5533;">å¼·é¢±é »ç‡å¤§å¢ 105%</strong>ã€‚é¢±é¢¨<strong style="color:#dd5533;">é™é›¨å¼·åº¦å¢åŠ ç´„ 20%</strong>ï¼Œé¡¯ç¤ºè¿‘å¹¾åå¹´å…§æ¥µç«¯é¢±é¢¨äº‹ä»¶å°‡æ˜é¡¯å¢åŠ ã€‚</p>';
        }
        h += '</div>';
        
        // ä¾†æº
        h += '<p style="text-align:center; font-size:11px; color:#8899aa; margin-bottom:15px;">è³‡æ–™ä¾†æºï¼š<a href="https://tccip.ncdr.nat.gov.tw/" style="color:#0088bb;">TCCIP è‡ºç£æ°£å€™è®Šé·æ¨ä¼°è³‡è¨Šèˆ‡èª¿é©çŸ¥è­˜å¹³å°</a></p>';
        
        // é‡æ–°æ¨¡æ“¬
        h += '<button onclick="restart()" style="display:block; width:100%; padding:14px; background:white; border:2px solid #0099cc; color:#0077aa; border-radius:10px; font-size:14px; font-weight:bold;">ğŸ”„ é‡æ–°æ¨¡æ“¬å…¶ä»–æƒ…å¢ƒ</button>';
    }
    
    document.getElementById('content').innerHTML = h;
    updateDots();
}

function updateDots() {
    var totalSteps = 6;
    var currentStep = step;
    if (step == 5.5) currentStep = 5;
    
    for (var i = 1; i <= totalSteps; i++) {
        var dot = document.getElementById('dot' + i);
        if (dot) {
            if (i < currentStep) {
                dot.style.background = '#00bb88';
                dot.style.color = 'white';
            } else if (i == currentStep) {
                dot.style.background = '#0099cc';
                dot.style.color = 'white';
            } else {
                dot.style.background = '#d0e4f0';
                dot.style.color = '#999';
            }
        }
    }
}

function choose(s, val) {
    if (s == 1) data.resolution = val;
    if (s == 2) data.rcp = val;
    if (s == 3) data.period = val;
    if (s == 4) data.downscale = val;
    step = s + 1;
    render();
    window.scrollTo(0, 0);
}

function runAnalysis() {
    step = 5.5;
    render();
}

function restart() {
    step = 1;
    data = {};
    render();
    window.scrollTo(0, 0);
}

render();
</script>

</body>
</html>
